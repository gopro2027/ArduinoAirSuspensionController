Hello from ArduinoAirSuspensionController!
<br>
Here is a list of releases:
<br>

<div id="firmware-list"></div>

<script>
async function fetchFirmwareReleases() {
  const owner = 'gopro2027';
  const repo = 'ArduinoAirSuspensionController';
  
  try {
    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}/releases?per_page=10`
    );
    const releases = await response.json();
    
    const firmwareList = releases.map(release => ({
      name: release.name,
      tag: release.tag_name,
      date: new Date(release.created_at),
      body: release.body,
      assets: release.assets.map(asset => ({
        name: asset.name,
        size: asset.size,
        downloadUrl: asset.browser_download_url // PUBLIC URL!
      }))
    }));
    
    displayFirmware(firmwareList);
  } catch (error) {
    console.error('Error fetching releases:', error);
  }
}

function displayFirmware(releases) {
  const container = document.getElementById('firmware-list');
  container.innerHTML = releases.map(release => `
    <div class="release">
      <h3>${release.name}</h3>
      <p><small>${release.date.toLocaleString()}</small></p>
      <p>${release.body}</p>
      <h4>Download:</h4>
      <ul>
        ${release.assets.map(asset => `
          <li>
            <a href="${asset.downloadUrl}" download>
              ${asset.name}
            </a>
            (${(asset.size / 1024).toFixed(2)} KB)
          </li>
        `).join('')}
      </ul>
    </div>
  `).join('');
}

// Call on page load
fetchFirmwareReleases();
</script>

<!-- <div id="artifacts-list"></div>
<script>
  async function fetchArtifacts() {
  const owner = 'gopro2027';
  const repo = 'ArduinoAirSuspensionController';
  const workflow = 'main.yml'; // or the workflow ID
  
  try {
    // Get recent workflow runs
    const runsResponse = await fetch(
      `https://api.github.com/repos/${owner}/${repo}/actions/workflows/${workflow}/runs?per_page=10`
    );
    const runsData = await runsResponse.json();
    
    // For each successful run, get artifacts
    const artifactsList = [];
    for (const run of runsData.workflow_runs) {
      if (run.conclusion === 'success') {
        const artifactsResponse = await fetch(run.artifacts_url);
        const artifactsData = await artifactsResponse.json();
        
        artifactsData.artifacts.forEach(artifact => {
          artifactsList.push({
            name: artifact.name,
            size: artifact.size_in_bytes,
            created: new Date(artifact.created_at),
            downloadUrl: artifact.archive_download_url,
            runNumber: run.run_number,
            commit: run.head_sha.substring(0, 7)
          });
        });
      }
    }
    
    displayArtifacts(artifactsList);
  } catch (error) {
    console.error('Error fetching artifacts:', error);
  }
}

function displayArtifacts(artifacts) {
  const container = document.getElementById('artifacts-list');
  container.innerHTML = artifacts.map(artifact => `
    <div class="artifact">
      <h3>${artifact.name}</h3>
      <p>Build #${artifact.runNumber} | Commit: ${artifact.commit}</p>
      <p>Size: ${(artifact.size / 1024).toFixed(2)} KB</p>
      <p>Created: ${artifact.created.toLocaleString()}</p>
      <a href="${artifact.downloadUrl}">Download (requires GitHub login)</a>
    </div>
  `).join('');
}

// Call on page load
fetchArtifacts();
</script> -->
